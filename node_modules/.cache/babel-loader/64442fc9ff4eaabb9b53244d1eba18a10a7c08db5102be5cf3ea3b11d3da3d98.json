{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\francis-portfolio\\\\src\\\\routes\\\\MusicPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport { Play, Download, Eye, Calendar, Search, Filter, Heart, ExternalLink, X } from \"lucide-react\";\nimport \"../MusicPage.css\";\n\n/**\r\n * CONFIG:\r\n * - Insert your YOUTUBE_API_KEY and optionally CHANNEL_ID or CHANNEL_HANDLE\r\n * - If CHANNEL_ID is empty, component will try to detect it via CHANNEL_HANDLE\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CONFIG = {\n  YOUTUBE_API_KEY: \"AIzaSyB1Bg552PcG5Gu-2BJ0ilHMuedXQgbcc5E\",\n  CHANNEL_ID: \"\",\n  // <-- Optionally paste the channel ID here (e.g., UCxxxx)\n  CHANNEL_HANDLE: \"@franciskogi\",\n  // <-- Example handle. Try to keep @ prefix.\n  MAX_RESULTS_PER_PAGE: 50 // YouTube max for search is 50\n};\n\n// ---------- Utility functions ----------\n/** Convert ISO 8601 duration (PT#H#M#S) to H:MM:SS or M:SS */\nexport function formatDuration(iso) {\n  if (!iso) return \"--:--\";\n  // Parse ISO duration\n  const match = iso.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n  if (!match) return iso;\n  const hours = parseInt(match[1] || 0, 10);\n  const minutes = parseInt(match[2] || 0, 10);\n  const seconds = parseInt(match[3] || 0, 10);\n  const pad = n => n < 10 ? `0${n}` : `${n}`;\n  if (hours > 0) return `${hours}:${pad(minutes)}:${pad(seconds)}`;\n  return `${minutes}:${pad(seconds)}`;\n}\n\n/** 1234567 -> 1.23M / 45K / 512 */\nexport function formatViews(count) {\n  if (count === undefined || count === null) return \"0\";\n  const n = Number(count);\n  if (isNaN(n)) return count;\n  if (n >= 1e9) return (n / 1e9).toFixed(2).replace(/\\.?0+$/, \"\") + \"B\";\n  if (n >= 1e6) return (n / 1e6).toFixed(2).replace(/\\.?0+$/, \"\") + \"M\";\n  if (n >= 1e3) return (n / 1e3).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\n  return String(n);\n}\n\n/** \"2024-11-12T08:00:00Z\" => \"Nov 12, 2024\" */\nexport function formatDate(isoString) {\n  try {\n    const d = new Date(isoString);\n    return d.toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\"\n    });\n  } catch {\n    return isoString;\n  }\n}\n\n/** Get download link(s). Default using Y2Mate; commented alternatives are provided. */\nexport function getDownloadLink(videoId) {\n  return `https://y2mate.com/youtube/${videoId}`;\n  // Alternatives (commented):\n  // return `https://ytmp3.plus/en19/${videoId}`; // YTMP3 style (may vary)\n  // return `https://en.savefrom.net/1-${videoId}`; // SaveFrom.net pattern (check site)\n}\n\n/** Format numbers with commas (used internally if needed) */\nfunction numberWithCommas(x) {\n  return String(x).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\n// ---------- Main component ----------\nexport default function MusicCatalog() {\n  _s();\n  var _channelInfo$title, _channelInfo$stats, _channelInfo$stats2, _selectedVideo$detail, _selectedVideo$detail2;\n  // STATES\n  const [channelId, setChannelId] = useState(CONFIG.CHANNEL_ID || \"\");\n  const [channelInfo, setChannelInfo] = useState(null);\n  const [videos, setVideos] = useState([]); // each item: { videoId, snippet, details }\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // UI states\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [sortBy, setSortBy] = useState(\"latest\"); // latest, mostViewed, alpha\n  const [selectedVideo, setSelectedVideo] = useState(null); // video object for modal\n  const modalIframeRef = useRef(null);\n\n  // Pagination and API state trackers\n  const controllerRef = useRef(null); // for aborting fetches if needed\n\n  // EFFECT: initialize data\n  useEffect(() => {\n    let isMounted = true;\n    // Abort controller for fetch canceling\n    controllerRef.current = new AbortController();\n    async function init() {\n      setLoading(true);\n      setError(null);\n      setVideos([]);\n      setChannelInfo(null);\n      if (!CONFIG.YOUTUBE_API_KEY || CONFIG.YOUTUBE_API_KEY.includes(\"YOUR_\")) {\n        setError(\"YouTube API key is missing. Insert your API key in the CONFIG at the top of the component.\");\n        setLoading(false);\n        return;\n      }\n      try {\n        let resolvedChannelId = channelId || \"\";\n        if (!resolvedChannelId) {\n          // Attempt to detect from handle\n          if (CONFIG.CHANNEL_HANDLE && CONFIG.CHANNEL_HANDLE.trim().length > 0) {\n            console.log(\"[MusicCatalog] Detecting channel ID from handle:\", CONFIG.CHANNEL_HANDLE);\n            resolvedChannelId = await fetchChannelIdFromHandle(CONFIG.CHANNEL_HANDLE, CONFIG.YOUTUBE_API_KEY);\n            if (!resolvedChannelId) {\n              throw new Error(`Could not determine channel ID from handle \"${CONFIG.CHANNEL_HANDLE}\". Try providing CHANNEL_ID in CONFIG.`);\n            }\n            if (isMounted) setChannelId(resolvedChannelId);\n          } else {\n            throw new Error(\"No CHANNEL_ID or CHANNEL_HANDLE provided in CONFIG.\");\n          }\n        }\n\n        // Fetch channel info\n        const chInfo = await fetchChannelInfo(resolvedChannelId, CONFIG.YOUTUBE_API_KEY);\n        if (isMounted) setChannelInfo(chInfo);\n\n        // Fetch all videos for channel\n        const allSearchResults = await fetchAllChannelVideos(resolvedChannelId, CONFIG.YOUTUBE_API_KEY);\n        console.log(\"[MusicCatalog] total search results fetched:\", allSearchResults.length);\n        if (allSearchResults.length === 0) {\n          setVideos([]); // empty state\n          setLoading(false);\n          return;\n        }\n\n        // Extract videoIds in batches and call Videos API for details (statistics, contentDetails)\n        const videoIdList = allSearchResults.map(item => item.id.videoId).filter(Boolean);\n        const videoDetailsMap = await fetchVideosDetailsBatched(videoIdList, CONFIG.YOUTUBE_API_KEY);\n\n        // Merge snippet + details\n        const merged = allSearchResults.map(item => {\n          const vid = item.id.videoId;\n          return {\n            videoId: vid,\n            snippet: item.snippet,\n            details: videoDetailsMap[vid] || {}\n          };\n        });\n        if (isMounted) {\n          setVideos(merged);\n        }\n      } catch (err) {\n        console.error(\"[MusicCatalog] Error:\", err);\n        setError((err === null || err === void 0 ? void 0 : err.message) || \"An unknown error occurred while fetching the music catalog. Check console for details.\");\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    }\n    init();\n    return () => {\n      isMounted = false;\n      if (controllerRef.current) controllerRef.current.abort();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // run once on mount\n\n  // ---------- API helper functions ----------\n\n  async function fetchChannelIdFromHandle(handle, apiKey) {\n    try {\n      const q = encodeURIComponent(handle.replace(/^@/, \"\"));\n      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=${q}&maxResults=1&key=${apiKey}`;\n      console.log(\"[MusicCatalog] fetchChannelIdFromHandle URL:\", url);\n      const res = await fetch(url);\n      if (!res.ok) {\n        const txt = await res.text();\n        console.warn(\"[MusicCatalog] fetchChannelIdFromHandle non-ok:\", res.status, txt);\n        return null;\n      }\n      const data = await res.json();\n      if (data.items && data.items.length > 0) {\n        return data.items[0].snippet.channelId;\n      }\n      return null;\n    } catch (err) {\n      console.error(\"[MusicCatalog] fetchChannelIdFromHandle error:\", err);\n      return null;\n    }\n  }\n\n  /** Fetch channel snippet + statistics */\n  async function fetchChannelInfo(id, apiKey) {\n    var _item$snippet$thumbna, _item$snippet$thumbna2, _item$snippet$thumbna3, _item$snippet$thumbna4;\n    const url = `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${id}&key=${apiKey}`;\n    console.log(\"[MusicCatalog] fetchChannelInfo URL:\", url);\n    const res = await fetch(url);\n    if (!res.ok) {\n      const txt = await res.text();\n      throw new Error(`Failed to fetch channel info: ${res.status} ${txt}`);\n    }\n    const data = await res.json();\n    if (!data.items || data.items.length === 0) {\n      throw new Error(\"Channel not found or no public data available.\");\n    }\n    const item = data.items[0];\n    return {\n      id: item.id,\n      title: item.snippet.title,\n      description: item.snippet.description,\n      profilePicture: ((_item$snippet$thumbna = item.snippet.thumbnails) === null || _item$snippet$thumbna === void 0 ? void 0 : (_item$snippet$thumbna2 = _item$snippet$thumbna.high) === null || _item$snippet$thumbna2 === void 0 ? void 0 : _item$snippet$thumbna2.url) || ((_item$snippet$thumbna3 = item.snippet.thumbnails) === null || _item$snippet$thumbna3 === void 0 ? void 0 : (_item$snippet$thumbna4 = _item$snippet$thumbna3.default) === null || _item$snippet$thumbna4 === void 0 ? void 0 : _item$snippet$thumbna4.url) || null,\n      stats: item.statistics || {}\n    };\n  }\n\n  /** Fetch ALL videos (search results) for a channel, handle pagination */\n  async function fetchAllChannelVideos(channelIdToFetch, apiKey) {\n    console.log(\"[MusicCatalog] fetchAllChannelVideos for:\", channelIdToFetch);\n    const results = [];\n    let nextPageToken = \"\";\n    let pageCount = 0;\n    const maxPerPage = CONFIG.MAX_RESULTS_PER_PAGE || 50;\n\n    // We'll fetch up to a generous limit to avoid infinite loops; YouTube channels can be large.\n    const MAX_PAGES = 1000;\n    while (pageCount < MAX_PAGES) {\n      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelIdToFetch}&maxResults=${maxPerPage}&order=date&type=video${nextPageToken ? `&pageToken=${nextPageToken}` : \"\"}&key=${apiKey}`;\n      console.log(`[MusicCatalog] fetching search page ${pageCount + 1}:`, url);\n      const res = await fetch(url);\n      if (!res.ok) {\n        const txt = await res.text();\n        // Detect rate limit\n        if (res.status === 403) {\n          throw new Error(`YouTube API quota exceeded or access forbidden (403). Message: ${txt}. Consider checking API key quota or project settings.`);\n        }\n        throw new Error(`YouTube search API failed: ${res.status} ${txt}`);\n      }\n      const data = await res.json();\n      if (data.items && data.items.length > 0) {\n        // append\n        results.push(...data.items);\n      }\n      nextPageToken = data.nextPageToken || \"\";\n      pageCount += 1;\n      if (!nextPageToken) break;\n    }\n    return results;\n  }\n\n  /** Fetch videos details (statistics, contentDetails) in batches of up to 50 */\n  async function fetchVideosDetailsBatched(videoIdArray, apiKey) {\n    console.log(\"[MusicCatalog] fetchVideosDetailsBatched count:\", videoIdArray.length);\n    const map = {};\n    const BATCH = 50;\n    for (let i = 0; i < videoIdArray.length; i += BATCH) {\n      const batchIds = videoIdArray.slice(i, i + BATCH).join(\",\");\n      const url = `https://www.googleapis.com/youtube/v3/videos?part=contentDetails,statistics&maxResults=50&id=${batchIds}&key=${apiKey}`;\n      console.log(\"[MusicCatalog] fetching video details batch:\", url);\n      const res = await fetch(url);\n      if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`Failed to fetch video details: ${res.status} ${txt}`);\n      }\n      const data = await res.json();\n      if (data.items && data.items.length > 0) {\n        data.items.forEach(it => {\n          var _it$contentDetails, _it$statistics, _it$statistics2, _it$statistics3;\n          map[it.id] = {\n            duration: (_it$contentDetails = it.contentDetails) === null || _it$contentDetails === void 0 ? void 0 : _it$contentDetails.duration,\n            viewCount: ((_it$statistics = it.statistics) === null || _it$statistics === void 0 ? void 0 : _it$statistics.viewCount) || 0,\n            likeCount: ((_it$statistics2 = it.statistics) === null || _it$statistics2 === void 0 ? void 0 : _it$statistics2.likeCount) || 0,\n            commentCount: ((_it$statistics3 = it.statistics) === null || _it$statistics3 === void 0 ? void 0 : _it$statistics3.commentCount) || 0\n          };\n        });\n      } else {\n        console.warn(\"[MusicCatalog] video details batch returned no items\");\n      }\n      // small pause could be added to be kind to rate limits; omitted to keep UX snappy\n    }\n    return map;\n  }\n\n  // ---------- UI helpers ----------\n  function openVideoModal(video) {\n    setSelectedVideo(video);\n    // setTimeout ensures iframe is in DOM before setting src\n    setTimeout(() => {\n      if (modalIframeRef.current) {\n        modalIframeRef.current.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1&rel=0`;\n      }\n    }, 50);\n    // trap focus etc. (lightweight)\n    document.body.style.overflow = \"hidden\";\n  }\n  function closeVideoModal() {\n    setSelectedVideo(null);\n    if (modalIframeRef.current) {\n      // stop playback by clearing src\n      modalIframeRef.current.src = \"\";\n    }\n    document.body.style.overflow = \"\";\n  }\n\n  // Filter + sort logic wrapped in useMemo for performance\n  const filteredVideos = useMemo(() => {\n    return getFilteredVideos(videos, searchQuery, sortBy);\n  }, [videos, searchQuery, sortBy]);\n\n  // ---------- Render ----------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"music-catalog-root\",\n    \"aria-live\": \"polite\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mc-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-channel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-avatar\",\n          children: channelInfo !== null && channelInfo !== void 0 && channelInfo.profilePicture ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: channelInfo.profilePicture,\n            alt: `${channelInfo.title} avatar`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mc-avatar-placeholder\",\n            children: (channelInfo === null || channelInfo === void 0 ? void 0 : (_channelInfo$title = channelInfo.title) === null || _channelInfo$title === void 0 ? void 0 : _channelInfo$title[0]) || \"F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-channel-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mc-channel-title\",\n            children: (channelInfo === null || channelInfo === void 0 ? void 0 : channelInfo.title) || \"Artist Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mc-channel-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [(channelInfo === null || channelInfo === void 0 ? void 0 : (_channelInfo$stats = channelInfo.stats) === null || _channelInfo$stats === void 0 ? void 0 : _channelInfo$stats.videoCount) || videos.length, \" videos\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [formatViews((channelInfo === null || channelInfo === void 0 ? void 0 : (_channelInfo$stats2 = channelInfo.stats) === null || _channelInfo$stats2 === void 0 ? void 0 : _channelInfo$stats2.viewCount) || totalViews(videos)), \" views\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-search\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"search\",\n            placeholder: \"Search titles or descriptions...\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            \"aria-label\": \"Search videos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-sort\",\n          children: [/*#__PURE__*/_jsxDEV(Filter, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortBy,\n            onChange: e => setSortBy(e.target.value),\n            \"aria-label\": \"Sort videos\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"mostViewed\",\n              children: \"Most Viewed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"alpha\",\n              children: \"A - Z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"mc-main\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-spinner\",\n          role: \"status\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-loading-text\",\n          children: \"Loading music catalog...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-error\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Unable to load music catalog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-error-tips\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Troubleshooting tips:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Verify your API key in the CONFIG at the top of MusicCatalog.jsx.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Check YouTube Data API v3 quota and enable the API in Google Cloud Console.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"If using a channel handle, try pasting the channel ID directly into CONFIG.CHANNEL_ID.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Open the browser console for full debug logs (console.log statements are present).\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this) : filteredVideos.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"No videos found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Try clearing your search or changing sort options.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mc-grid\",\n          role: \"list\",\n          \"aria-label\": \"Video grid\",\n          children: filteredVideos.map(v => {\n            var _v$snippet$thumbnails, _v$snippet$thumbnails2, _v$snippet$thumbnails3, _v$snippet$thumbnails4, _v$snippet$thumbnails5, _v$snippet$thumbnails6, _v$details, _v$details2, _v$details3;\n            return /*#__PURE__*/_jsxDEV(\"article\", {\n              className: \"mc-card\",\n              role: \"listitem\",\n              tabIndex: 0,\n              \"aria-labelledby\": `title-${v.videoId}`,\n              onClick: () => openVideoModal(v),\n              onKeyDown: e => {\n                if (e.key === \"Enter\" || e.key === \" \") openVideoModal(v);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mc-thumb-wrap\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: ((_v$snippet$thumbnails = v.snippet.thumbnails) === null || _v$snippet$thumbnails === void 0 ? void 0 : (_v$snippet$thumbnails2 = _v$snippet$thumbnails.high) === null || _v$snippet$thumbnails2 === void 0 ? void 0 : _v$snippet$thumbnails2.url) || ((_v$snippet$thumbnails3 = v.snippet.thumbnails) === null || _v$snippet$thumbnails3 === void 0 ? void 0 : (_v$snippet$thumbnails4 = _v$snippet$thumbnails3.medium) === null || _v$snippet$thumbnails4 === void 0 ? void 0 : _v$snippet$thumbnails4.url) || ((_v$snippet$thumbnails5 = v.snippet.thumbnails) === null || _v$snippet$thumbnails5 === void 0 ? void 0 : (_v$snippet$thumbnails6 = _v$snippet$thumbnails5.default) === null || _v$snippet$thumbnails6 === void 0 ? void 0 : _v$snippet$thumbnails6.url) || \"\",\n                  alt: v.snippet.title,\n                  loading: \"lazy\",\n                  className: \"mc-thumb\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mc-duration-badge\",\n                  children: formatDuration((_v$details = v.details) === null || _v$details === void 0 ? void 0 : _v$details.duration)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mc-play-overlay\",\n                  \"aria-hidden\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(Play, {\n                    size: 36\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 451,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mc-card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  id: `title-${v.videoId}`,\n                  className: \"mc-video-title\",\n                  children: v.snippet.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mc-card-stats\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mc-stat\",\n                    children: [/*#__PURE__*/_jsxDEV(Eye, {\n                      size: 14\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatViews((_v$details2 = v.details) === null || _v$details2 === void 0 ? void 0 : _v$details2.viewCount)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 463,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mc-stat\",\n                    children: [/*#__PURE__*/_jsxDEV(Heart, {\n                      size: 14\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 466,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatViews((_v$details3 = v.details) === null || _v$details3 === void 0 ? void 0 : _v$details3.likeCount)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 467,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mc-stat\",\n                    children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                      size: 14\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatDate(v.snippet.publishedAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 471,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mc-card-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `https://www.youtube.com/watch?v=${v.videoId}`,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: \"mc-btn mc-btn-watch\",\n                    onClick: e => e.stopPropagation(),\n                    \"aria-label\": `Watch ${v.snippet.title} on YouTube`,\n                    children: [/*#__PURE__*/_jsxDEV(Play, {\n                      size: 14\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 484,\n                      columnNumber: 25\n                    }, this), \" Watch\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: getDownloadLink(v.videoId),\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: \"mc-btn mc-btn-download\",\n                    onClick: e => e.stopPropagation(),\n                    \"aria-label\": `Download ${v.snippet.title}`,\n                    children: [/*#__PURE__*/_jsxDEV(Download, {\n                      size: 14\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 495,\n                      columnNumber: 25\n                    }, this), \" Download\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this)]\n            }, v.videoId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          className: \"mc-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: filteredVideos.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 25\n            }, this), \" of\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: videos.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), \" videos\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mc-footer-links\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: `https://www.youtube.com/channel/${channelId}`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: [\"Open channel \", /*#__PURE__*/_jsxDEV(ExternalLink, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), selectedVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mc-modal-backdrop\",\n      onClick: e => {\n        // close if clicking on backdrop\n        if (e.target.classList.contains(\"mc-modal-backdrop\")) closeVideoModal();\n      },\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mc-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mc-modal-close\",\n          onClick: closeVideoModal,\n          \"aria-label\": \"Close modal\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mc-modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mc-player\",\n            children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n              ref: modalIframeRef,\n              title: selectedVideo.snippet.title,\n              allow: \"autoplay; encrypted-media\",\n              frameBorder: \"0\",\n              allowFullScreen: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mc-modal-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mc-modal-title\",\n              children: selectedVideo.snippet.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mc-modal-stats\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Eye, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 21\n                }, this), \" \", formatViews((_selectedVideo$detail = selectedVideo.details) === null || _selectedVideo$detail === void 0 ? void 0 : _selectedVideo$detail.viewCount)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Heart, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 21\n                }, this), \" \", formatViews((_selectedVideo$detail2 = selectedVideo.details) === null || _selectedVideo$detail2 === void 0 ? void 0 : _selectedVideo$detail2.likeCount)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 21\n                }, this), \" \", formatDate(selectedVideo.snippet.publishedAt)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mc-modal-description\",\n              children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                children: selectedVideo.snippet.description || \"No description.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mc-modal-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"mc-btn mc-btn-watch\",\n                href: `https://www.youtube.com/watch?v=${selectedVideo.videoId}`,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: [\"Open in YouTube \", /*#__PURE__*/_jsxDEV(ExternalLink, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"mc-btn mc-btn-download\",\n                href: getDownloadLink(selectedVideo.videoId),\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: [\"Download \", /*#__PURE__*/_jsxDEV(Download, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 30\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"mc-btn mc-btn-close\",\n                onClick: closeVideoModal,\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 347,\n    columnNumber: 5\n  }, this);\n}\n\n// ---------- Helper functions not exported ----------\n/** Compute total views across loaded videos (best-effort) */\n_s(MusicCatalog, \"RBW+nsi3jSLNDueyRkaqt3wGKzo=\");\n_c = MusicCatalog;\nfunction totalViews(videos) {\n  if (!videos || videos.length === 0) return 0;\n  return videos.reduce((acc, v) => {\n    var _v$details4;\n    return acc + Number(((_v$details4 = v.details) === null || _v$details4 === void 0 ? void 0 : _v$details4.viewCount) || 0);\n  }, 0);\n}\n\n/** Apply filtering and sorting */\nfunction getFilteredVideos(videos, query, sortBy) {\n  let arr = Array.isArray(videos) ? videos.slice() : [];\n\n  // SEARCH: case-insensitive in title or description\n  if (query && query.trim().length > 0) {\n    const q = query.trim().toLowerCase();\n    arr = arr.filter(v => {\n      var _v$snippet, _v$snippet$title, _v$snippet2, _v$snippet2$descripti;\n      const t = ((_v$snippet = v.snippet) === null || _v$snippet === void 0 ? void 0 : (_v$snippet$title = _v$snippet.title) === null || _v$snippet$title === void 0 ? void 0 : _v$snippet$title.toLowerCase()) || \"\";\n      const d = ((_v$snippet2 = v.snippet) === null || _v$snippet2 === void 0 ? void 0 : (_v$snippet2$descripti = _v$snippet2.description) === null || _v$snippet2$descripti === void 0 ? void 0 : _v$snippet2$descripti.toLowerCase()) || \"\";\n      return t.includes(q) || d.includes(q);\n    });\n  }\n\n  // SORT\n  if (sortBy === \"mostViewed\") {\n    arr.sort((a, b) => {\n      var _b$details, _a$details;\n      return Number(((_b$details = b.details) === null || _b$details === void 0 ? void 0 : _b$details.viewCount) || 0) - Number(((_a$details = a.details) === null || _a$details === void 0 ? void 0 : _a$details.viewCount) || 0);\n    });\n  } else if (sortBy === \"alpha\") {\n    arr.sort((a, b) => {\n      var _a$snippet, _b$snippet;\n      const A = (((_a$snippet = a.snippet) === null || _a$snippet === void 0 ? void 0 : _a$snippet.title) || \"\").toLowerCase();\n      const B = (((_b$snippet = b.snippet) === null || _b$snippet === void 0 ? void 0 : _b$snippet.title) || \"\").toLowerCase();\n      return A.localeCompare(B);\n    });\n  } else {\n    // latest: order by publishedAt desc\n    arr.sort((a, b) => {\n      var _b$snippet2, _a$snippet2;\n      return new Date(((_b$snippet2 = b.snippet) === null || _b$snippet2 === void 0 ? void 0 : _b$snippet2.publishedAt) || 0) - new Date(((_a$snippet2 = a.snippet) === null || _a$snippet2 === void 0 ? void 0 : _a$snippet2.publishedAt) || 0);\n    });\n  }\n  return arr;\n}\nvar _c;\n$RefreshReg$(_c, \"MusicCatalog\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Play","Download","Eye","Calendar","Search","Filter","Heart","ExternalLink","X","jsxDEV","_jsxDEV","Fragment","_Fragment","CONFIG","YOUTUBE_API_KEY","CHANNEL_ID","CHANNEL_HANDLE","MAX_RESULTS_PER_PAGE","formatDuration","iso","match","hours","parseInt","minutes","seconds","pad","n","formatViews","count","undefined","Number","isNaN","toFixed","replace","String","formatDate","isoString","d","Date","toLocaleDateString","year","month","day","getDownloadLink","videoId","numberWithCommas","x","MusicCatalog","_s","_channelInfo$title","_channelInfo$stats","_channelInfo$stats2","_selectedVideo$detail","_selectedVideo$detail2","channelId","setChannelId","channelInfo","setChannelInfo","videos","setVideos","loading","setLoading","error","setError","searchQuery","setSearchQuery","sortBy","setSortBy","selectedVideo","setSelectedVideo","modalIframeRef","controllerRef","isMounted","current","AbortController","init","includes","resolvedChannelId","trim","length","console","log","fetchChannelIdFromHandle","Error","chInfo","fetchChannelInfo","allSearchResults","fetchAllChannelVideos","videoIdList","map","item","id","filter","Boolean","videoDetailsMap","fetchVideosDetailsBatched","merged","vid","snippet","details","err","message","abort","handle","apiKey","q","encodeURIComponent","url","res","fetch","ok","txt","text","warn","status","data","json","items","_item$snippet$thumbna","_item$snippet$thumbna2","_item$snippet$thumbna3","_item$snippet$thumbna4","title","description","profilePicture","thumbnails","high","default","stats","statistics","channelIdToFetch","results","nextPageToken","pageCount","maxPerPage","MAX_PAGES","push","videoIdArray","BATCH","i","batchIds","slice","join","forEach","it","_it$contentDetails","_it$statistics","_it$statistics2","_it$statistics3","duration","contentDetails","viewCount","likeCount","commentCount","openVideoModal","video","setTimeout","src","document","body","style","overflow","closeVideoModal","filteredVideos","getFilteredVideos","className","children","alt","fileName","_jsxFileName","lineNumber","columnNumber","videoCount","totalViews","size","type","placeholder","value","onChange","e","target","role","v","_v$snippet$thumbnails","_v$snippet$thumbnails2","_v$snippet$thumbnails3","_v$snippet$thumbnails4","_v$snippet$thumbnails5","_v$snippet$thumbnails6","_v$details","_v$details2","_v$details3","tabIndex","onClick","onKeyDown","key","medium","publishedAt","href","rel","stopPropagation","classList","contains","ref","allow","frameBorder","allowFullScreen","_c","reduce","acc","_v$details4","query","arr","Array","isArray","toLowerCase","_v$snippet","_v$snippet$title","_v$snippet2","_v$snippet2$descripti","t","sort","a","b","_b$details","_a$details","_a$snippet","_b$snippet","A","B","localeCompare","_b$snippet2","_a$snippet2","$RefreshReg$"],"sources":["C:/Users/user/Documents/GitHub/francis-portfolio/src/routes/MusicPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport {\r\n  Play,\r\n  Download,\r\n  Eye,\r\n  Calendar,\r\n  Search,\r\n  Filter,\r\n  Heart,\r\n  ExternalLink,\r\n  X,\r\n} from \"lucide-react\";\r\nimport \"../MusicPage.css\";\r\n\r\n/**\r\n * CONFIG:\r\n * - Insert your YOUTUBE_API_KEY and optionally CHANNEL_ID or CHANNEL_HANDLE\r\n * - If CHANNEL_ID is empty, component will try to detect it via CHANNEL_HANDLE\r\n */\r\nconst CONFIG = {\r\n  YOUTUBE_API_KEY: \"AIzaSyB1Bg552PcG5Gu-2BJ0ilHMuedXQgbcc5E\",\r\n  CHANNEL_ID: \"\", // <-- Optionally paste the channel ID here (e.g., UCxxxx)\r\n  CHANNEL_HANDLE: \"@franciskogi\", // <-- Example handle. Try to keep @ prefix.\r\n  MAX_RESULTS_PER_PAGE: 50, // YouTube max for search is 50\r\n};\r\n\r\n// ---------- Utility functions ----------\r\n/** Convert ISO 8601 duration (PT#H#M#S) to H:MM:SS or M:SS */\r\nexport function formatDuration(iso) {\r\n  if (!iso) return \"--:--\";\r\n  // Parse ISO duration\r\n  const match = iso.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n  if (!match) return iso;\r\n  const hours = parseInt(match[1] || 0, 10);\r\n  const minutes = parseInt(match[2] || 0, 10);\r\n  const seconds = parseInt(match[3] || 0, 10);\r\n\r\n  const pad = (n) => (n < 10 ? `0${n}` : `${n}`);\r\n  if (hours > 0) return `${hours}:${pad(minutes)}:${pad(seconds)}`;\r\n  return `${minutes}:${pad(seconds)}`;\r\n}\r\n\r\n/** 1234567 -> 1.23M / 45K / 512 */\r\nexport function formatViews(count) {\r\n  if (count === undefined || count === null) return \"0\";\r\n  const n = Number(count);\r\n  if (isNaN(n)) return count;\r\n  if (n >= 1e9) return (n / 1e9).toFixed(2).replace(/\\.?0+$/, \"\") + \"B\";\r\n  if (n >= 1e6) return (n / 1e6).toFixed(2).replace(/\\.?0+$/, \"\") + \"M\";\r\n  if (n >= 1e3) return (n / 1e3).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\r\n  return String(n);\r\n}\r\n\r\n/** \"2024-11-12T08:00:00Z\" => \"Nov 12, 2024\" */\r\nexport function formatDate(isoString) {\r\n  try {\r\n    const d = new Date(isoString);\r\n    return d.toLocaleDateString(undefined, {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    });\r\n  } catch {\r\n    return isoString;\r\n  }\r\n}\r\n\r\n/** Get download link(s). Default using Y2Mate; commented alternatives are provided. */\r\nexport function getDownloadLink(videoId) {\r\n  return `https://y2mate.com/youtube/${videoId}`;\r\n  // Alternatives (commented):\r\n  // return `https://ytmp3.plus/en19/${videoId}`; // YTMP3 style (may vary)\r\n  // return `https://en.savefrom.net/1-${videoId}`; // SaveFrom.net pattern (check site)\r\n}\r\n\r\n/** Format numbers with commas (used internally if needed) */\r\nfunction numberWithCommas(x) {\r\n  return String(x).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n}\r\n\r\n// ---------- Main component ----------\r\nexport default function MusicCatalog() {\r\n  // STATES\r\n  const [channelId, setChannelId] = useState(CONFIG.CHANNEL_ID || \"\");\r\n  const [channelInfo, setChannelInfo] = useState(null);\r\n  const [videos, setVideos] = useState([]); // each item: { videoId, snippet, details }\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // UI states\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [sortBy, setSortBy] = useState(\"latest\"); // latest, mostViewed, alpha\r\n  const [selectedVideo, setSelectedVideo] = useState(null); // video object for modal\r\n  const modalIframeRef = useRef(null);\r\n\r\n  // Pagination and API state trackers\r\n  const controllerRef = useRef(null); // for aborting fetches if needed\r\n\r\n  // EFFECT: initialize data\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    // Abort controller for fetch canceling\r\n    controllerRef.current = new AbortController();\r\n\r\n    async function init() {\r\n      setLoading(true);\r\n      setError(null);\r\n      setVideos([]);\r\n      setChannelInfo(null);\r\n\r\n      if (!CONFIG.YOUTUBE_API_KEY || CONFIG.YOUTUBE_API_KEY.includes(\"YOUR_\")) {\r\n        setError(\r\n          \"YouTube API key is missing. Insert your API key in the CONFIG at the top of the component.\"\r\n        );\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        let resolvedChannelId = channelId || \"\";\r\n\r\n        if (!resolvedChannelId) {\r\n          // Attempt to detect from handle\r\n          if (CONFIG.CHANNEL_HANDLE && CONFIG.CHANNEL_HANDLE.trim().length > 0) {\r\n            console.log(\"[MusicCatalog] Detecting channel ID from handle:\", CONFIG.CHANNEL_HANDLE);\r\n            resolvedChannelId = await fetchChannelIdFromHandle(\r\n              CONFIG.CHANNEL_HANDLE,\r\n              CONFIG.YOUTUBE_API_KEY\r\n            );\r\n            if (!resolvedChannelId) {\r\n              throw new Error(\r\n                `Could not determine channel ID from handle \"${CONFIG.CHANNEL_HANDLE}\". Try providing CHANNEL_ID in CONFIG.`\r\n              );\r\n            }\r\n            if (isMounted) setChannelId(resolvedChannelId);\r\n          } else {\r\n            throw new Error(\"No CHANNEL_ID or CHANNEL_HANDLE provided in CONFIG.\");\r\n          }\r\n        }\r\n\r\n        // Fetch channel info\r\n        const chInfo = await fetchChannelInfo(resolvedChannelId, CONFIG.YOUTUBE_API_KEY);\r\n        if (isMounted) setChannelInfo(chInfo);\r\n\r\n        // Fetch all videos for channel\r\n        const allSearchResults = await fetchAllChannelVideos(resolvedChannelId, CONFIG.YOUTUBE_API_KEY);\r\n        console.log(\"[MusicCatalog] total search results fetched:\", allSearchResults.length);\r\n\r\n        if (allSearchResults.length === 0) {\r\n          setVideos([]); // empty state\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Extract videoIds in batches and call Videos API for details (statistics, contentDetails)\r\n        const videoIdList = allSearchResults.map((item) => item.id.videoId).filter(Boolean);\r\n\r\n        const videoDetailsMap = await fetchVideosDetailsBatched(videoIdList, CONFIG.YOUTUBE_API_KEY);\r\n\r\n        // Merge snippet + details\r\n        const merged = allSearchResults.map((item) => {\r\n          const vid = item.id.videoId;\r\n          return {\r\n            videoId: vid,\r\n            snippet: item.snippet,\r\n            details: videoDetailsMap[vid] || {},\r\n          };\r\n        });\r\n\r\n        if (isMounted) {\r\n          setVideos(merged);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[MusicCatalog] Error:\", err);\r\n        setError(\r\n          err?.message ||\r\n            \"An unknown error occurred while fetching the music catalog. Check console for details.\"\r\n        );\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    }\r\n\r\n    init();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      if (controllerRef.current) controllerRef.current.abort();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // run once on mount\r\n\r\n  // ---------- API helper functions ----------\r\n\r\n\r\n  async function fetchChannelIdFromHandle(handle, apiKey) {\r\n    try {\r\n      const q = encodeURIComponent(handle.replace(/^@/, \"\"));\r\n      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=${q}&maxResults=1&key=${apiKey}`;\r\n      console.log(\"[MusicCatalog] fetchChannelIdFromHandle URL:\", url);\r\n      const res = await fetch(url);\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        console.warn(\"[MusicCatalog] fetchChannelIdFromHandle non-ok:\", res.status, txt);\r\n        return null;\r\n      }\r\n      const data = await res.json();\r\n      if (data.items && data.items.length > 0) {\r\n        return data.items[0].snippet.channelId;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      console.error(\"[MusicCatalog] fetchChannelIdFromHandle error:\", err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /** Fetch channel snippet + statistics */\r\n  async function fetchChannelInfo(id, apiKey) {\r\n    const url = `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${id}&key=${apiKey}`;\r\n    console.log(\"[MusicCatalog] fetchChannelInfo URL:\", url);\r\n    const res = await fetch(url);\r\n    if (!res.ok) {\r\n      const txt = await res.text();\r\n      throw new Error(`Failed to fetch channel info: ${res.status} ${txt}`);\r\n    }\r\n    const data = await res.json();\r\n    if (!data.items || data.items.length === 0) {\r\n      throw new Error(\"Channel not found or no public data available.\");\r\n    }\r\n    const item = data.items[0];\r\n    return {\r\n      id: item.id,\r\n      title: item.snippet.title,\r\n      description: item.snippet.description,\r\n      profilePicture:\r\n        item.snippet.thumbnails?.high?.url ||\r\n        item.snippet.thumbnails?.default?.url ||\r\n        null,\r\n      stats: item.statistics || {},\r\n    };\r\n  }\r\n\r\n  /** Fetch ALL videos (search results) for a channel, handle pagination */\r\n  async function fetchAllChannelVideos(channelIdToFetch, apiKey) {\r\n    console.log(\"[MusicCatalog] fetchAllChannelVideos for:\", channelIdToFetch);\r\n    const results = [];\r\n    let nextPageToken = \"\";\r\n    let pageCount = 0;\r\n    const maxPerPage = CONFIG.MAX_RESULTS_PER_PAGE || 50;\r\n\r\n    // We'll fetch up to a generous limit to avoid infinite loops; YouTube channels can be large.\r\n    const MAX_PAGES = 1000;\r\n\r\n    while (pageCount < MAX_PAGES) {\r\n      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelIdToFetch}&maxResults=${maxPerPage}&order=date&type=video${nextPageToken ? `&pageToken=${nextPageToken}` : \"\"}&key=${apiKey}`;\r\n      console.log(`[MusicCatalog] fetching search page ${pageCount + 1}:`, url);\r\n\r\n      const res = await fetch(url);\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        // Detect rate limit\r\n        if (res.status === 403) {\r\n          throw new Error(\r\n            `YouTube API quota exceeded or access forbidden (403). Message: ${txt}. Consider checking API key quota or project settings.`\r\n          );\r\n        }\r\n        throw new Error(`YouTube search API failed: ${res.status} ${txt}`);\r\n      }\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.items && data.items.length > 0) {\r\n        // append\r\n        results.push(...data.items);\r\n      }\r\n\r\n      nextPageToken = data.nextPageToken || \"\";\r\n      pageCount += 1;\r\n      if (!nextPageToken) break;\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  /** Fetch videos details (statistics, contentDetails) in batches of up to 50 */\r\n  async function fetchVideosDetailsBatched(videoIdArray, apiKey) {\r\n    console.log(\"[MusicCatalog] fetchVideosDetailsBatched count:\", videoIdArray.length);\r\n    const map = {};\r\n    const BATCH = 50;\r\n    for (let i = 0; i < videoIdArray.length; i += BATCH) {\r\n      const batchIds = videoIdArray.slice(i, i + BATCH).join(\",\");\r\n      const url = `https://www.googleapis.com/youtube/v3/videos?part=contentDetails,statistics&maxResults=50&id=${batchIds}&key=${apiKey}`;\r\n      console.log(\"[MusicCatalog] fetching video details batch:\", url);\r\n      const res = await fetch(url);\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        throw new Error(`Failed to fetch video details: ${res.status} ${txt}`);\r\n      }\r\n      const data = await res.json();\r\n      if (data.items && data.items.length > 0) {\r\n        data.items.forEach((it) => {\r\n          map[it.id] = {\r\n            duration: it.contentDetails?.duration,\r\n            viewCount: it.statistics?.viewCount || 0,\r\n            likeCount: it.statistics?.likeCount || 0,\r\n            commentCount: it.statistics?.commentCount || 0,\r\n          };\r\n        });\r\n      } else {\r\n        console.warn(\"[MusicCatalog] video details batch returned no items\");\r\n      }\r\n      // small pause could be added to be kind to rate limits; omitted to keep UX snappy\r\n    }\r\n    return map;\r\n  }\r\n\r\n  // ---------- UI helpers ----------\r\n  function openVideoModal(video) {\r\n    setSelectedVideo(video);\r\n    // setTimeout ensures iframe is in DOM before setting src\r\n    setTimeout(() => {\r\n      if (modalIframeRef.current) {\r\n        modalIframeRef.current.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1&rel=0`;\r\n      }\r\n    }, 50);\r\n    // trap focus etc. (lightweight)\r\n    document.body.style.overflow = \"hidden\";\r\n  }\r\n\r\n  function closeVideoModal() {\r\n    setSelectedVideo(null);\r\n    if (modalIframeRef.current) {\r\n      // stop playback by clearing src\r\n      modalIframeRef.current.src = \"\";\r\n    }\r\n    document.body.style.overflow = \"\";\r\n  }\r\n\r\n  // Filter + sort logic wrapped in useMemo for performance\r\n  const filteredVideos = useMemo(() => {\r\n    return getFilteredVideos(videos, searchQuery, sortBy);\r\n  }, [videos, searchQuery, sortBy]);\r\n\r\n  // ---------- Render ----------\r\n  return (\r\n    <div className=\"music-catalog-root\" aria-live=\"polite\">\r\n      <header className=\"mc-header\">\r\n        <div className=\"mc-channel\">\r\n          <div className=\"mc-avatar\">\r\n            {channelInfo?.profilePicture ? (\r\n              <img src={channelInfo.profilePicture} alt={`${channelInfo.title} avatar`} />\r\n            ) : (\r\n              <div className=\"mc-avatar-placeholder\">{channelInfo?.title?.[0] || \"F\"}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"mc-channel-meta\">\r\n            <h1 className=\"mc-channel-title\">{channelInfo?.title || \"Artist Name\"}</h1>\r\n            <div className=\"mc-channel-stats\">\r\n              <span>{channelInfo?.stats?.videoCount || videos.length} videos</span>\r\n              <span></span>\r\n              <span>{formatViews(channelInfo?.stats?.viewCount || totalViews(videos))} views</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mc-controls\">\r\n          <div className=\"mc-search\">\r\n            <Search size={16} />\r\n            <input\r\n              type=\"search\"\r\n              placeholder=\"Search titles or descriptions...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              aria-label=\"Search videos\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mc-sort\">\r\n            <Filter size={16} />\r\n            <select\r\n              value={sortBy}\r\n              onChange={(e) => setSortBy(e.target.value)}\r\n              aria-label=\"Sort videos\"\r\n            >\r\n              <option value=\"latest\">Latest</option>\r\n              <option value=\"mostViewed\">Most Viewed</option>\r\n              <option value=\"alpha\">A - Z</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"mc-main\">\r\n        {loading ? (\r\n          <div className=\"mc-loading\">\r\n            <div className=\"mc-spinner\" role=\"status\" aria-hidden=\"true\" />\r\n            <div className=\"mc-loading-text\">Loading music catalog...</div>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"mc-error\" role=\"alert\">\r\n            <h3>Unable to load music catalog</h3>\r\n            <p>{error}</p>\r\n            <div className=\"mc-error-tips\">\r\n              <strong>Troubleshooting tips:</strong>\r\n              <ul>\r\n                <li>Verify your API key in the CONFIG at the top of MusicCatalog.jsx.</li>\r\n                <li>Check YouTube Data API v3 quota and enable the API in Google Cloud Console.</li>\r\n                <li>If using a channel handle, try pasting the channel ID directly into CONFIG.CHANNEL_ID.</li>\r\n                <li>Open the browser console for full debug logs (console.log statements are present).</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        ) : filteredVideos.length === 0 ? (\r\n          <div className=\"mc-empty\">\r\n            <h3>No videos found</h3>\r\n            <p>Try clearing your search or changing sort options.</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <section className=\"mc-grid\" role=\"list\" aria-label=\"Video grid\">\r\n              {filteredVideos.map((v) => (\r\n                <article\r\n                  key={v.videoId}\r\n                  className=\"mc-card\"\r\n                  role=\"listitem\"\r\n                  tabIndex={0}\r\n                  aria-labelledby={`title-${v.videoId}`}\r\n                  onClick={() => openVideoModal(v)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\" || e.key === \" \") openVideoModal(v);\r\n                  }}\r\n                >\r\n                  <div className=\"mc-thumb-wrap\">\r\n                    <img\r\n                      src={\r\n                        v.snippet.thumbnails?.high?.url ||\r\n                        v.snippet.thumbnails?.medium?.url ||\r\n                        v.snippet.thumbnails?.default?.url ||\r\n                        \"\"\r\n                      }\r\n                      alt={v.snippet.title}\r\n                      loading=\"lazy\"\r\n                      className=\"mc-thumb\"\r\n                    />\r\n                    <span className=\"mc-duration-badge\">\r\n                      {formatDuration(v.details?.duration)}\r\n                    </span>\r\n\r\n                    <div className=\"mc-play-overlay\" aria-hidden=\"true\">\r\n                      <Play size={36} />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mc-card-body\">\r\n                    <h4 id={`title-${v.videoId}`} className=\"mc-video-title\">\r\n                      {v.snippet.title}\r\n                    </h4>\r\n\r\n                    <div className=\"mc-card-stats\">\r\n                      <div className=\"mc-stat\">\r\n                        <Eye size={14} />\r\n                        <span>{formatViews(v.details?.viewCount)}</span>\r\n                      </div>\r\n                      <div className=\"mc-stat\">\r\n                        <Heart size={14} />\r\n                        <span>{formatViews(v.details?.likeCount)}</span>\r\n                      </div>\r\n                      <div className=\"mc-stat\">\r\n                        <Calendar size={14} />\r\n                        <span>{formatDate(v.snippet.publishedAt)}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mc-card-actions\">\r\n                      <a\r\n                        href={`https://www.youtube.com/watch?v=${v.videoId}`}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"mc-btn mc-btn-watch\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        aria-label={`Watch ${v.snippet.title} on YouTube`}\r\n                      >\r\n                        <Play size={14} /> Watch\r\n                      </a>\r\n\r\n                      <a\r\n                        href={getDownloadLink(v.videoId)}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"mc-btn mc-btn-download\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        aria-label={`Download ${v.snippet.title}`}\r\n                      >\r\n                        <Download size={14} /> Download\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </article>\r\n              ))}\r\n            </section>\r\n\r\n            <footer className=\"mc-footer\">\r\n              <div>\r\n                Showing <strong>{filteredVideos.length}</strong> of{\" \"}\r\n                <strong>{videos.length}</strong> videos\r\n              </div>\r\n              <div className=\"mc-footer-links\">\r\n                <a\r\n                  href={`https://www.youtube.com/channel/${channelId}`}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  Open channel <ExternalLink size={14} />\r\n                </a>\r\n              </div>\r\n            </footer>\r\n          </>\r\n        )}\r\n      </main>\r\n\r\n      {/* Modal */}\r\n      {selectedVideo && (\r\n        <div\r\n          className=\"mc-modal-backdrop\"\r\n          onClick={(e) => {\r\n            // close if clicking on backdrop\r\n            if (e.target.classList.contains(\"mc-modal-backdrop\")) closeVideoModal();\r\n          }}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n        >\r\n          <div className=\"mc-modal\">\r\n            <button className=\"mc-modal-close\" onClick={closeVideoModal} aria-label=\"Close modal\">\r\n              <X size={18} />\r\n            </button>\r\n\r\n            <div className=\"mc-modal-content\">\r\n              <div className=\"mc-player\">\r\n                <iframe\r\n                  ref={modalIframeRef}\r\n                  title={selectedVideo.snippet.title}\r\n                  allow=\"autoplay; encrypted-media\"\r\n                  frameBorder=\"0\"\r\n                  allowFullScreen\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mc-modal-info\">\r\n                <h2 className=\"mc-modal-title\">{selectedVideo.snippet.title}</h2>\r\n\r\n                <div className=\"mc-modal-stats\">\r\n                  <div>\r\n                    <Eye size={14} /> {formatViews(selectedVideo.details?.viewCount)}\r\n                  </div>\r\n                  <div>\r\n                    <Heart size={14} /> {formatViews(selectedVideo.details?.likeCount)}\r\n                  </div>\r\n                  <div>\r\n                    <Calendar size={14} /> {formatDate(selectedVideo.snippet.publishedAt)}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mc-modal-description\">\r\n                  <pre>{selectedVideo.snippet.description || \"No description.\"}</pre>\r\n                </div>\r\n\r\n                <div className=\"mc-modal-actions\">\r\n                  <a\r\n                    className=\"mc-btn mc-btn-watch\"\r\n                    href={`https://www.youtube.com/watch?v=${selectedVideo.videoId}`}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    Open in YouTube <ExternalLink size={14} />\r\n                  </a>\r\n                  <a\r\n                    className=\"mc-btn mc-btn-download\"\r\n                    href={getDownloadLink(selectedVideo.videoId)}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    Download <Download size={14} />\r\n                  </a>\r\n                  <button className=\"mc-btn mc-btn-close\" onClick={closeVideoModal}>\r\n                    Close\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ---------- Helper functions not exported ----------\r\n/** Compute total views across loaded videos (best-effort) */\r\nfunction totalViews(videos) {\r\n  if (!videos || videos.length === 0) return 0;\r\n  return videos.reduce((acc, v) => acc + Number(v.details?.viewCount || 0), 0);\r\n}\r\n\r\n/** Apply filtering and sorting */\r\nfunction getFilteredVideos(videos, query, sortBy) {\r\n  let arr = Array.isArray(videos) ? videos.slice() : [];\r\n\r\n  // SEARCH: case-insensitive in title or description\r\n  if (query && query.trim().length > 0) {\r\n    const q = query.trim().toLowerCase();\r\n    arr = arr.filter((v) => {\r\n      const t = v.snippet?.title?.toLowerCase() || \"\";\r\n      const d = v.snippet?.description?.toLowerCase() || \"\";\r\n      return t.includes(q) || d.includes(q);\r\n    });\r\n  }\r\n\r\n  // SORT\r\n  if (sortBy === \"mostViewed\") {\r\n    arr.sort((a, b) => (Number(b.details?.viewCount || 0) - Number(a.details?.viewCount || 0)));\r\n  } else if (sortBy === \"alpha\") {\r\n    arr.sort((a, b) => {\r\n      const A = (a.snippet?.title || \"\").toLowerCase();\r\n      const B = (b.snippet?.title || \"\").toLowerCase();\r\n      return A.localeCompare(B);\r\n    });\r\n  } else {\r\n    // latest: order by publishedAt desc\r\n    arr.sort((a, b) => new Date(b.snippet?.publishedAt || 0) - new Date(a.snippet?.publishedAt || 0));\r\n  }\r\n\r\n  return arr;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}